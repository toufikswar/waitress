{"id": "Reinstall_Microsoft_Teams_Windows", "name": "Reinstall Microsoft Teams Windows", "description": "Reinstalls Microsoft Teams to avoid version disparity, broken installed versions or simply because you want the new features offered in new versions.\n'''''Warning:''' This Remote Action simultaneously downloads and installs the latest version of Microsoft Teams on all targeted devices. Please ensure that the available network capacity is appropriate for the number of targeted devices.''", "purpose": ["REMEDIATION"], "targeting": {"apiEnabled": true, "manualEnabled": true, "manualAllowMultipleDevices": true}, "scriptInfo": {"runAs": "INTERACTIVE_USER", "timeoutSeconds": 900, "inputs": [{"description": "UID of the campaign to notify user that Microsoft Teams must be closed for the reinstallation. Provide an empty GUID to avoid executing this campaign", "id": "CampaignId", "name": "CampaignId", "options": ["541a1111-5330-40a6-a9e3-2468e4903bd9"], "allowCustomValue": false, "usedByWindows": true, "usedByMacOs": false}, {"description": "UID of the campaign to notify the user about the finish of the Microsoft Teams reinstallation process. Provide an empty GUID to avoid executing this campaign", "id": "OperationCompletedCampaignId", "name": "OperationCompletedCampaignId", "options": ["655ef9e0-542b-45c5-a84b-3bb87a364569"], "allowCustomValue": false, "usedByWindows": true, "usedByMacOs": false}, {"description": "Maximum random delay set to avoid overloading the network. Provide number of seconds less than 600", "id": "MaximumDelayInSeconds", "name": "MaximumDelayInSeconds", "options": ["30"], "allowCustomValue": false, "usedByWindows": true, "usedByMacOs": false}], "outputs": [], "scriptWindows": {"name": "Invoke-TeamsReinstall.ps1", "script": "77u/PCMNCi5TWU5PUFNJUw0KUmVpbnN0YWxscyBNaWNyb3NvZnQgVGVhbXMuDQoNCi5ERVNDUklQVElPTg0KUmVpbnN0YWxscyBNaWNyb3NvZnQgVGVhbXMgdG8gYXZvaWQgdmVyc2lvbiBkaXNwYXJpdHksIGJyb2tlbiBpbnN0YWxsZWQgdmVyc2lvbnMgb3Igc2ltcGx5IGJlY2F1c2UgeW91IHdhbnQgdGhlIG5ldyBmZWF0dXJlcyBvZmZlcmVkIGluIG5ldyB2ZXJzaW9ucy4NCicnJycnV2FybmluZzonJycgVGhpcyBSZW1vdGUgQWN0aW9uIHNpbXVsdGFuZW91c2x5IGRvd25sb2FkcyBhbmQgaW5zdGFsbHMgdGhlIGxhdGVzdCB2ZXJzaW9uIG9mIE1pY3Jvc29mdCBUZWFtcyBvbiBhbGwgdGFyZ2V0ZWQgZGV2aWNlcy4gUGxlYXNlIGVuc3VyZSB0aGF0IHRoZSBhdmFpbGFibGUgbmV0d29yayBjYXBhY2l0eSBpcyBhcHByb3ByaWF0ZSBmb3IgdGhlIG51bWJlciBvZiB0YXJnZXRlZCBkZXZpY2VzLicnDQoNCi5GVU5DVElPTkFMSVRZDQpSZW1lZGlhdGlvbg0KDQouSU5QVVRTDQpJRCAgTGFiZWwgICAgICAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbg0KMSAgIENhbXBhaWduSWQgICAgICAgICAgICAgICAgICAgICAgVUlEIG9mIHRoZSBjYW1wYWlnbiB0byBub3RpZnkgdXNlciB0aGF0IE1pY3Jvc29mdCBUZWFtcyBtdXN0IGJlIGNsb3NlZCBmb3IgdGhlIHJlaW5zdGFsbGF0aW9uLiBQcm92aWRlIGFuIGVtcHR5IEdVSUQgdG8gYXZvaWQgZXhlY3V0aW5nIHRoaXMgY2FtcGFpZ24NCjIgICBPcGVyYXRpb25Db21wbGV0ZWRDYW1wYWlnbklkICAgIFVJRCBvZiB0aGUgY2FtcGFpZ24gdG8gbm90aWZ5IHRoZSB1c2VyIGFib3V0IHRoZSBmaW5pc2ggb2YgdGhlIE1pY3Jvc29mdCBUZWFtcyByZWluc3RhbGxhdGlvbiBwcm9jZXNzLiBQcm92aWRlIGFuIGVtcHR5IEdVSUQgdG8gYXZvaWQgZXhlY3V0aW5nIHRoaXMgY2FtcGFpZ24NCjMgICBNYXhpbXVtRGVsYXlJblNlY29uZHMgICAgICAgICAgIE1heGltdW0gcmFuZG9tIGRlbGF5IHNldCB0byBhdm9pZCBvdmVybG9hZGluZyB0aGUgbmV0d29yay4gUHJvdmlkZSBudW1iZXIgb2Ygc2Vjb25kcyBsZXNzIHRoYW4gNjAwDQoNCi5OT1RFUw0KQ29udGV4dDogICAgICAgICAgICBJbnRlcmFjdGl2ZVVzZXINClZlcnNpb246ICAgICAgICAgICAgMS40LjAuMCAtIFVwZGF0ZWQgbmFtZQ0KICAgICAgICAgICAgICAgICAgICAxLjMuMC4wIC0gVXBkYXRlZCBkZXNjcmlwdGlvbg0KICAgICAgICAgICAgICAgICAgICAxLjIuMC4wIC0gUmVtb3ZlZCBzZWN1cml0eSB2ZXJpZmljYXRpb25zIGFuZCBwdWJsaXNoZWQgdW5zaWduZWQNCiAgICAgICAgICAgICAgICAgICAgMS4xLjAuMCAtIENhbXBhaWducyBub3cgY2FuIGJlIGNhbGxlZCBpbmRlcGVuZGVudGx5DQogICAgICAgICAgICAgICAgICAgIDEuMC4yLjAgLSBSZW1vdmVkIGZpbGUgaGFzaCB2ZXJpZmljYXRpb24gYW5kIGNoYW5nZWQgZXhwZWN0ZWQgdGh1bWJwcmludA0KICAgICAgICAgICAgICAgICAgICAxLjAuMS4wIC0gRml4ZWQgcmFuZG9tIGRlbGF5IGFuZCB0aW1lb3V0IG1hbmFnZW1lbnQNCiAgICAgICAgICAgICAgICAgICAgMS4wLjAuMCAtIEluaXRpYWwgcmVsZWFzZQ0KTGFzdCBHZW5lcmF0ZWQ6ICAgICAxOSBBdWcgMjAyMSAtIDEwOjU1OjMzDQpDb3B5cmlnaHQgKEMpIDIwMjEgTmV4dGhpbmsgU0EsIFN3aXR6ZXJsYW5kDQojPg0KIw0KIyBJbnB1dCBwYXJhbWV0ZXJzIGRlZmluaXRpb24NCiMNCnBhcmFtKA0KICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJHRydWUpXVtzdHJpbmddJENhbXBhaWduSWQsDQogICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkdHJ1ZSldW3N0cmluZ10kT3BlcmF0aW9uQ29tcGxldGVkQ2FtcGFpZ25JZCwNCiAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICR0cnVlKV1bc3RyaW5nXSRNYXhpbXVtRGVsYXlJblNlY29uZHMNCikNCiMgRW5kIG9mIHBhcmFtZXRlcnMgZGVmaW5pdGlvbg0KDQojDQojIENvbnN0YW50cyBkZWZpbml0aW9uDQojDQpOZXctVmFyaWFibGUgLU5hbWUgJ0NBTVBBSUdOX0RMTF9QQVRIJyBgDQogICAgLVZhbHVlICIkZW52Ok5FWFRISU5LXFJlbW90ZUFjdGlvbnNcbnh0Y2FtcGFpZ25hY3Rpb24uZGxsIiBgDQogICAgLU9wdGlvbiBSZWFkT25seSAtU2NvcGUgU2NyaXB0DQpOZXctVmFyaWFibGUgLU5hbWUgJ0NNRF9FWEUnIGANCiAgICAtVmFsdWUgIiRlbnY6U3lzdGVtUm9vdFxTeXN0ZW0zMlxjbWQuZXhlIiBgDQogICAgLU9wdGlvbiBSZWFkT25seSAtU2NvcGUgU2NyaXB0DQpOZXctVmFyaWFibGUgLU5hbWUgJ0VSUk9SX0VYQ0VQVElPTl9UWVBFJyBgDQogICAgLVZhbHVlIEB7RW52aXJvbm1lbnQgPSAnW0Vudmlyb25tZW50IGVycm9yXScNCiAgICAgICAgICAgICBJbnB1dCA9ICdbSW5wdXQgZXJyb3JdJw0KICAgICAgICAgICAgIEludGVybmFsID0gJ1tJbnRlcm5hbCBlcnJvcl0nfSBgDQogICAgLU9wdGlvbiBSZWFkT25seSAtU2NvcGUgU2NyaXB0DQpOZXctVmFyaWFibGUgLU5hbWUgJ0xPQ0FMX1NZU1RFTV9JREVOVElUWScgYA0KICAgIC1WYWx1ZSAnUy0xLTUtMTgnIC1PcHRpb24gUmVhZE9ubHkgLVNjb3BlIFNjcmlwdA0KTmV3LVZhcmlhYmxlIC1OYW1lICdNQVhfU0NSSVBUX0RFTEFZX1NFQycgYA0KICAgIC1WYWx1ZSA2MDAgYA0KICAgIC1PcHRpb24gUmVhZE9ubHkgLVNjb3BlIFNjcmlwdA0KTmV3LVZhcmlhYmxlIC1OYW1lICdORVRXT1JLX01BTkFHRVJfQ0xTSUQnIGANCiAgICAtVmFsdWUgKFtndWlkXSd7RENCMDBDMDEtNTcwRi00QTlCLThENjktMTk5RkRCQTU3MjNCfScpIGANCiAgICAtT3B0aW9uIFJlYWRPbmx5IC1TY29wZSBTY3JpcHQNCk5ldy1WYXJpYWJsZSAtTmFtZSAnTlVNX1JFVFJJRVMnIGANCiAgICAtVmFsdWUgMjUgYA0KICAgIC1PcHRpb24gUmVhZE9ubHkgLVNjb3BlIFNjcmlwdA0KTmV3LVZhcmlhYmxlIC1OYW1lICdSRVRSWV9XQUlUX01TJyBgDQogICAgLVZhbHVlIDIwMCBgDQogICAgLU9wdGlvbiBSZWFkT25seSAtU2NvcGUgU2NyaXB0DQpOZXctVmFyaWFibGUgLU5hbWUgJ1RMU18xMicgYA0KICAgIC1WYWx1ZSAzMDcyIGANCiAgICAtT3B0aW9uIFJlYWRPbmx5IC1TY29wZSBTY3JpcHQNCk5ldy1WYXJpYWJsZSAtTmFtZSAnVFJVU1RFRF9QVUJMSUNfQ0FTJyBgDQogICAgLVZhbHVlIEB7JzZBQjg3QjU1QUQwMzdBMjRDMDc0NEZGMTA0QzEwQ0VEQTJCNDhDQ0ZCNUZFQjA4NjQwQkRDRjg3NEM5MjMxRUQnID0gJ01pY3Jvc29mdCBDb3Jwb3JhdGlvbiBSb290IENBJw0KICAgICAgICAgICAgICc3OTY1NEQ5MEMzQTRBOUFBMjIwMjVEQkNDOEMyOEYyRUE1OEVCREIyNUUxNTlEREMyNjEwMTQzQkI3RjdEQUQ2JyA9ICdNaWNyb3NvZnQgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkgMjAxMCcNCiAgICAgICAgICAgICAnN0FGMkQ4RkY5QTNFREFDOTlDQTNBRTdGOEZCNENDQUJCMTIwQzFFMjkyQkUwNTY1QTY3QzZGNUI0MTdBMUFEMScgPSAnQWRvYmUgQWNyb2JhdCBEQyBBZG9iZSBJbmMnfSBgDQogICAgLU9wdGlvbiBSZWFkT25seSAtU2NvcGUgU2NyaXB0DQpOZXctVmFyaWFibGUgLU5hbWUgJ1VOQkxPQ0tfQ09NTUFORCcgYA0KICAgIC1WYWx1ZSAnL0MgZWNoby4+InswfSI6Wm9uZS5JZGVudGlmaWVyJyBgDQogICAgLU9wdGlvbiBSZWFkT25seSAtU2NvcGUgU2NyaXB0DQoNCk5ldy1WYXJpYWJsZSAtTmFtZSAnVEVBTVNfUFJPQ0VTU19OQU1FJyBgDQogICAgLVZhbHVlICdUZWFtcycgLU9wdGlvbiBSZWFkT25seSAtU2NvcGUgU2NyaXB0IC1Gb3JjZQ0KTmV3LVZhcmlhYmxlIC1OYW1lICdJTlNUQUxMRVJfRE9XTkxPQURfVVJMX1g4NicgYA0KICAgIC1WYWx1ZSAnaHR0cHM6Ly9nby5taWNyb3NvZnQuY29tL2Z3bGluay9wLz9saW5raWQ9ODY5NDI3JyBgDQogICAgLU9wdGlvbiBSZWFkT25seSAtU2NvcGUgU2NyaXB0IC1Gb3JjZQ0KTmV3LVZhcmlhYmxlIC1OYW1lICdJTlNUQUxMRVJfRE9XTkxPQURfVVJMX1g2NCcgYA0KICAgIC1WYWx1ZSAnaHR0cHM6Ly9nby5taWNyb3NvZnQuY29tL2Z3bGluay9wLz9saW5raWQ9ODY5NDI2JyBgDQogICAgLU9wdGlvbiBSZWFkT25seSAtU2NvcGUgU2NyaXB0IC1Gb3JjZQ0KDQpOZXctVmFyaWFibGUgLU5hbWUgJ0lOU1RBTExFUl9BUkdTJyBgDQogICAgLVZhbHVlIEAoJy9TJykgLU9wdGlvbiBSZWFkT25seSAtU2NvcGUgU2NyaXB0IC1Gb3JjZQ0KDQpOZXctVmFyaWFibGUgLU5hbWUgJ1RMU18xMicgYA0KICAgIC1WYWx1ZSAzMDcyIC1PcHRpb24gUmVhZE9ubHkgLVNjb3BlIFNjcmlwdCAtRm9yY2UNCg0KIw0KIyBJbnZva2UgbWFpbg0KIw0KZnVuY3Rpb24gSW52b2tlLU1haW4gKFtoYXNodGFibGVdJElucHV0UGFyYW1ldGVycykgew0KICAgICRleGl0Q29kZSA9IDANCg0KICAgIHRyeSB7DQogICAgICAgIEFkZC1OZXh0aGlua0NhbXBhaWduRExMDQogICAgICAgIFRlc3QtUnVubmluZ0FzSW50ZXJhY3RpdmVVc2VyDQogICAgICAgIFRlc3QtU3VwcG9ydGVkT1NWZXJzaW9uDQogICAgICAgIFRlc3QtSW5wdXRQYXJhbWV0ZXJzIC1JbnB1dFBhcmFtZXRlcnMgJElucHV0UGFyYW1ldGVycw0KDQogICAgICAgIEludm9rZS1UZWFtc1JlSW5zdGFsbCAtSW5wdXRQYXJhbWV0ZXJzICRJbnB1dFBhcmFtZXRlcnMNCiAgICB9IGNhdGNoIHsNCiAgICAgICAgJGV4aXRDb2RlID0gMQ0KICAgICAgICBXcml0ZS1TdGF0dXNNZXNzYWdlIC1NZXNzYWdlICRfDQogICAgfQ0KDQogICAgcmV0dXJuICRleGl0Q29kZQ0KfQ0KDQojDQojIFRlbXBsYXRlIGZ1bmN0aW9ucw0KIw0KZnVuY3Rpb24gQWRkLU5leHRoaW5rQ2FtcGFpZ25ETEwgew0KICAgIGlmICgtbm90IChUZXN0LVBhdGggLVBhdGggJENBTVBBSUdOX0RMTF9QQVRIKSkgew0KICAgICAgICB0aHJvdyAiJCgkRVJST1JfRVhDRVBUSU9OX1RZUEUuRW52aXJvbm1lbnQpIE5leHRoaW5rIENhbXBhaWduIERMTCBub3QgZm91bmQuICINCiAgICB9DQogICAgQWRkLVR5cGUgLVBhdGggJENBTVBBSUdOX0RMTF9QQVRIDQp9DQoNCmZ1bmN0aW9uIFRlc3QtUnVubmluZ0FzSW50ZXJhY3RpdmVVc2VyIHsNCiAgICBpZiAoQ29uZmlybS1DdXJyZW50VXNlcklzTG9jYWxTeXN0ZW0pIHsNCiAgICAgICAgdGhyb3cgIiQoJEVSUk9SX0VYQ0VQVElPTl9UWVBFLkVudmlyb25tZW50KSBUaGlzIHNjcmlwdCBtdXN0IGJlIHJ1biBhcyBJbnRlcmFjdGl2ZVVzZXIuICINCiAgICB9DQp9DQoNCmZ1bmN0aW9uIENvbmZpcm0tQ3VycmVudFVzZXJJc0xvY2FsU3lzdGVtIHsNCiAgICAkY3VycmVudElkZW50aXR5ID0gR2V0LUN1cnJlbnRJZGVudGl0eQ0KICAgIHJldHVybiAkY3VycmVudElkZW50aXR5IC1lcSAkTE9DQUxfU1lTVEVNX0lERU5USVRZDQp9DQoNCmZ1bmN0aW9uIEdldC1DdXJyZW50SWRlbnRpdHkgew0KICAgIHJldHVybiBbc2VjdXJpdHkucHJpbmNpcGFsLndpbmRvd3NpZGVudGl0eV06OkdldEN1cnJlbnQoKS5Vc2VyLlRvU3RyaW5nKCkNCn0NCg0KZnVuY3Rpb24gVGVzdC1TdXBwb3J0ZWRPU1ZlcnNpb24gew0KICAgICRPU1ZlcnNpb24gPSAoR2V0LU9TVmVyc2lvbikgLWFzIFt2ZXJzaW9uXQ0KICAgIGlmICgtbm90ICgkT1NWZXJzaW9uKSkgew0KICAgICAgICB0aHJvdyAiJCgkRVJST1JfRVhDRVBUSU9OX1RZUEUuRW52aXJvbm1lbnQpIFRoaXMgc2NyaXB0IGNvdWxkIG5vdCByZXR1cm4gT1MgdmVyc2lvbi4gIg0KICAgIH0NCiAgICBpZiAoKCRPU1ZlcnNpb24uTWFqb3IgLW5lIDYgLW9yICRPU1ZlcnNpb24uTWlub3IgLW5lIDEpIC1hbmQgYA0KICAgICAgICAoJE9TVmVyc2lvbi5NYWpvciAtbmUgMTApKSB7DQogICAgICAgIHRocm93ICIkKCRFUlJPUl9FWENFUFRJT05fVFlQRS5FbnZpcm9ubWVudCkgVGhpcyBzY3JpcHQgaXMgY29tcGF0aWJsZSB3aXRoIFdpbmRvd3MgNyBhbmQgMTAgb25seS4gIg0KICAgIH0NCn0NCg0KZnVuY3Rpb24gR2V0LU9TVmVyc2lvbiB7DQogICAgcmV0dXJuIEdldC1XbWlPYmplY3QgLUNsYXNzIFdpbjMyX09wZXJhdGluZ1N5c3RlbSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgLUZpbHRlciAnUHJvZHVjdFR5cGUgPSAxJyAtRXJyb3JBY3Rpb24gU3RvcCB8IGANCiAgICAgICAgICAgICAgIFNlbGVjdC1PYmplY3QgLUV4cGFuZFByb3BlcnR5IFZlcnNpb24NCn0NCg0KZnVuY3Rpb24gV3JpdGUtU3RhdHVzTWVzc2FnZSAoW3Bzb2JqZWN0XSRNZXNzYWdlKSB7DQogICAgJGV4Y2VwdGlvbk1lc3NhZ2UgPSAkTWVzc2FnZS5Ub1N0cmluZygpDQoNCiAgICBpZiAoJE1lc3NhZ2UuSW52b2NhdGlvbkluZm8uU2NyaXB0TGluZU51bWJlcikgew0KICAgICAgICAkdmVyc2lvbiA9IEdldC1TY3JpcHRWZXJzaW9uDQogICAgICAgIGlmICgtbm90IFtzdHJpbmddOjpJc051bGxPckVtcHR5KCR2ZXJzaW9uKSkgew0KICAgICAgICAgICAgJHNjcmlwdFZlcnNpb24gPSAiVmVyc2lvbjogJHZlcnNpb24uICINCiAgICAgICAgfQ0KDQogICAgICAgICRlcnJvck1lc3NhZ2VMaW5lID0gJHNjcmlwdFZlcnNpb24gKyAiTGluZSAnJCgkTWVzc2FnZS5JbnZvY2F0aW9uSW5mby5TY3JpcHRMaW5lTnVtYmVyKSc6ICINCiAgICB9DQoNCiAgICAkaG9zdC51aS5Xcml0ZUVycm9yTGluZSgkZXJyb3JNZXNzYWdlTGluZSArICRleGNlcHRpb25NZXNzYWdlKQ0KfQ0KDQpmdW5jdGlvbiBHZXQtU2NyaXB0VmVyc2lvbiB7DQogICAgJHNjcmlwdENvbnRlbnQgPSBHZXQtQ29udGVudCAkTXlJbnZvY2F0aW9uLlNjcmlwdE5hbWUgfCBPdXQtU3RyaW5nDQogICAgaWYgKCRzY3JpcHRDb250ZW50IC1ub3RtYXRjaCAnPCNbXHJcbl17Mn0uU1lOT1BTSVNbXlwjXD5dKiguTk9URVNbXlwjXD5dKilcIz4nKSB7IHJldHVybiB9DQoNCiAgICAkaGVscEJsb2NrID0gJE1hdGNoZXNbMV0uU3BsaXQoW2Vudmlyb25tZW50XTo6TmV3TGluZSkNCg0KICAgIGZvcmVhY2ggKCRsaW5lIGluICRoZWxwQmxvY2spIHsNCiAgICAgICAgaWYgKCRsaW5lIC1tYXRjaCAnVmVyc2lvbjonKSB7DQogICAgICAgICAgICByZXR1cm4gJGxpbmUuU3BsaXQoJzonKVsxXS5TcGxpdCgnLScpWzBdLlRyaW0oKQ0KICAgICAgICB9DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBUZXN0LUdVSURQYXJhbWV0ZXIgKFtzdHJpbmddJFBhcmFtTmFtZSwgW3N0cmluZ10kUGFyYW1WYWx1ZSkgew0KICAgIGlmICgtbm90ICgkUGFyYW1WYWx1ZSAtYXMgW2d1aWRdKSkgew0KICAgICAgICB0aHJvdyAiJCgkRVJST1JfRVhDRVBUSU9OX1RZUEUuSW5wdXQpIEVycm9yIGluIHBhcmFtZXRlciAnJFBhcmFtTmFtZScuIE9ubHkgVUlEIHZhbHVlcyBhcmUgYWNjZXB0ZWQuICINCiAgICB9DQp9DQoNCmZ1bmN0aW9uIFRlc3QtUGFyYW1JbkFsbG93ZWRSYW5nZSAoW3N0cmluZ10kUGFyYW1OYW1lLCBbc3RyaW5nXSRQYXJhbVZhbHVlLCBbaW50XSRMb3dlckxpbWl0LCBbaW50XSRVcHBlckxpbWl0KSB7DQogICAgVGVzdC1QYXJhbUlzSW50ZWdlciAtUGFyYW1OYW1lICRQYXJhbU5hbWUgLVBhcmFtVmFsdWUgJFBhcmFtVmFsdWUNCiAgICAkaW50VmFsdWUgPSAkUGFyYW1WYWx1ZSAtYXMgW2ludF0NCiAgICBpZiAoJGludFZhbHVlIC1sdCAkTG93ZXJMaW1pdCAtb3IgJGludFZhbHVlIC1ndCAkVXBwZXJMaW1pdCkgew0KICAgICAgICB0aHJvdyAiJCgkRVJST1JfRVhDRVBUSU9OX1RZUEUuSW5wdXQpIEVycm9yIGluIHBhcmFtZXRlciAnJFBhcmFtTmFtZScuIEl0IG11c3QgYmUgYmV0d2VlbiBbJExvd2VyTGltaXQsICRVcHBlckxpbWl0XS4gIg0KICAgIH0NCn0NCg0KZnVuY3Rpb24gVGVzdC1QYXJhbUlzSW50ZWdlciAoW3N0cmluZ10kUGFyYW1OYW1lLCBbc3RyaW5nXSRQYXJhbVZhbHVlKSB7DQogICAgJGludFZhbHVlID0gJFBhcmFtVmFsdWUgLWFzIFtpbnRdDQogICAgaWYgKFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRQYXJhbVZhbHVlKSAtb3IgJG51bGwgLWVxICRpbnRWYWx1ZSkgew0KICAgICAgICB0aHJvdyAiJCgkRVJST1JfRVhDRVBUSU9OX1RZUEUuSW5wdXQpIEVycm9yIGluIHBhcmFtZXRlciAnJFBhcmFtTmFtZScuICckUGFyYW1WYWx1ZScgaXMgbm90IGFuIGludGVnZXIuICINCiAgICB9DQp9DQoNCmZ1bmN0aW9uIEluaXRpYWxpemUtSW5zdGFsbGVyU3BlY3MgKFtzdHJpbmddJENlcnRpZmljYXRlVGh1bWJwcmludCwgW3N0cmluZ10kSW5zdGFsbGVyQXJncywgW3N0cmluZ10kRG93bmxvYWRVUkx4ODYsIFtzdHJpbmddJERvd25sb2FkVVJMeDY0LCBbc3RyaW5nXSRGaWxlSGFzaHg4NiwgW3N0cmluZ10kRmlsZUhhc2h4NjQpIHsNCiAgICByZXR1cm4gQHtDZXJ0aWZpY2F0ZVRodW1icHJpbnQgPSAkQ2VydGlmaWNhdGVUaHVtYnByaW50DQogICAgICAgICAgICAgSW5zdGFsbGVyQXJncyA9ICRJbnN0YWxsZXJBcmdzDQogICAgICAgICAgICAgRG93bmxvYWRVUkx4ODYgPSAkRG93bmxvYWRVUkx4ODYNCiAgICAgICAgICAgICBEb3dubG9hZFVSTHg2NCA9ICREb3dubG9hZFVSTHg2NA0KICAgICAgICAgICAgIEZpbGVIYXNoeDg2ID0gJEZpbGVIYXNoeDg2DQogICAgICAgICAgICAgRmlsZUhhc2h4NjQgPSAkRmlsZUhhc2h4NjR9DQp9DQoNCmZ1bmN0aW9uIEluaXRpYWxpemUtSW5zdGFsbGVySW5mb3JtYXRpb24gKFtoYXNodGFibGVdJElucHV0UGFyYW1ldGVycywgW2hhc2h0YWJsZV0kSW5zdGFsbGVyU3BlY3MpIHsNCiAgICAkbG9jYWxGb2xkZXIgPSBHZXQtVGVtcG9yYXJ5Rm9sZGVyUGF0aA0KDQogICAgcmV0dXJuIEB7SW5zdGFsbGVyVXJsID0gR2V0LURvd25sb2FkVXJsQnlBcmNoaXRlY3R1cmUgLUluc3RhbGxlclNwZWNzICRJbnN0YWxsZXJTcGVjcw0KICAgICAgICAgICAgIEZvbGRlciA9ICRsb2NhbEZvbGRlcg0KICAgICAgICAgICAgIFBhdGggPSAiJGxvY2FsRm9sZGVyXGluc3RhbGxlci5leGUiDQogICAgICAgICAgICAgVGh1bWJwcmludCA9ICRJbnN0YWxsZXJTcGVjcy5DZXJ0aWZpY2F0ZVRodW1icHJpbnQNCiAgICAgICAgICAgICBIYXNoID0gR2V0LUluc3RhbGxlckhhc2hCeUFyY2hpdGVjdHVyZSAtSW5zdGFsbGVyU3BlY3MgJEluc3RhbGxlclNwZWNzDQogICAgICAgICAgICAgSW5zdGFsbGF0aW9uRGVsYXkgPSBbaW50XTo6UGFyc2UoJElucHV0UGFyYW1ldGVycy5NYXhpbXVtRGVsYXlJblNlY29uZHMpDQogICAgICAgICAgICAgSW5zdGFsbGF0aW9uQXJndW1lbnRzID0gJEluc3RhbGxlclNwZWNzLkluc3RhbGxlckFyZ3MNCiAgICAgICAgICAgICBDYW1wYWlnbklkID0gJElucHV0UGFyYW1ldGVycy5DYW1wYWlnbklkDQogICAgICAgICAgICAgT3BlcmF0aW9uQ29tcGxldGVkQ2FtcGFpZ25JZCA9ICRJbnB1dFBhcmFtZXRlcnMuT3BlcmF0aW9uQ29tcGxldGVkQ2FtcGFpZ25JZH0NCn0NCg0KZnVuY3Rpb24gR2V0LVRlbXBvcmFyeUZvbGRlclBhdGggew0KICAgICRyYW5kb21WYWx1ZSA9IEdldC1SYW5kb21BbHBoYU51bWVyaWNTdHJpbmcNCiAgICBpZiAoQ29uZmlybS1DdXJyZW50VXNlcklzTG9jYWxTeXN0ZW0pIHsNCiAgICAgICAgcmV0dXJuIChKb2luLVBhdGggLVBhdGggIiRlbnY6U1lTVEVNUk9PVFxOZXh0aGluayIgLUNoaWxkUGF0aCAkcmFuZG9tVmFsdWUpDQogICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIChKb2luLVBhdGggLVBhdGggJGVudjpURU1QIC1DaGlsZFBhdGggJHJhbmRvbVZhbHVlKQ0KICAgIH0NCn0NCg0KZnVuY3Rpb24gR2V0LVJhbmRvbUFscGhhTnVtZXJpY1N0cmluZyB7DQogICAgcmV0dXJuIFtndWlkXTo6TmV3R3VpZCgpLnRvU3RyaW5nKCdOJykNCn0NCg0KZnVuY3Rpb24gR2V0LURvd25sb2FkVXJsQnlBcmNoaXRlY3R1cmUgKFtoYXNodGFibGVdJEluc3RhbGxlclNwZWNzKSB7DQogICAgcmV0dXJuICQoaWYgKFRlc3QtNjRCaXRzQXJjaGl0ZWN0dXJlKSB7ICRJbnN0YWxsZXJTcGVjcy5Eb3dubG9hZFVSTHg2NCB9DQogICAgICAgICAgICAgZWxzZSB7ICRJbnN0YWxsZXJTcGVjcy5Eb3dubG9hZFVSTHg4NiB9KQ0KfQ0KDQpmdW5jdGlvbiBUZXN0LTY0Qml0c0FyY2hpdGVjdHVyZSB7DQogICAgcmV0dXJuIChHZXQtV21pT2JqZWN0IC1DbGFzcyBXaW4zMl9PcGVyYXRpbmdTeXN0ZW0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAtRXJyb3JBY3Rpb24gU3RvcCB8IGANCiAgICAgICAgICAgICAgICAgU2VsZWN0LU9iamVjdCAtRXhwYW5kUHJvcGVydHkgT1NBcmNoaXRlY3R1cmUpIC1tYXRjaCAnNjQnDQp9DQoNCmZ1bmN0aW9uIEdldC1JbnN0YWxsZXJIYXNoQnlBcmNoaXRlY3R1cmUgKFtoYXNodGFibGVdJEluc3RhbGxlclNwZWNzKSB7DQogICAgcmV0dXJuICQoaWYgKFRlc3QtNjRCaXRzQXJjaGl0ZWN0dXJlKSB7ICRJbnN0YWxsZXJTcGVjcy5GaWxlSGFzaHg2NCB9DQogICAgICAgICAgICAgZWxzZSB7ICRJbnN0YWxsZXJTcGVjcy5GaWxlSGFzaHg4NiB9KQ0KfQ0KDQpmdW5jdGlvbiBUZXN0LUdpdmVuUHJvY2VzcyAoW3N0cmluZ10kUHJvY2Vzc05hbWUpIHsNCiAgICByZXR1cm4gJG51bGwgLW5lIChHZXQtR2l2ZW5Qcm9jZXNzIC1Qcm9jZXNzTmFtZSAkUHJvY2Vzc05hbWUpDQp9DQoNCmZ1bmN0aW9uIEdldC1HaXZlblByb2Nlc3MgKFtzdHJpbmddJFByb2Nlc3NOYW1lKSB7DQogICAgcmV0dXJuIEdldC1Qcm9jZXNzIC1OYW1lICRQcm9jZXNzTmFtZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZQ0KfQ0KDQpmdW5jdGlvbiBUZXN0LUVtcHR5R1VJRCAoW3N0cmluZ10kR3VpZCkgew0KICAgIHJldHVybiAkR3VpZCAtZXEgW2d1aWRdOjpFbXB0eS5HdWlkDQp9DQoNCmZ1bmN0aW9uIFN0b3AtR2l2ZW5Qcm9jZXNzIChbc3RyaW5nXSRQcm9jZXNzTmFtZSkgew0KICAgIFN0b3AtUHJvY2VzcyAtTmFtZSAkUHJvY2Vzc05hbWUgLUZvcmNlIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlDQogICAgZm9yICgkaSA9IDA7ICRpIC1sdCAkTlVNX1JFVFJJRVM7ICRpKyspIHsNCiAgICAgICAgU3RhcnQtU2xlZXAgLU1pbGxpc2Vjb25kcyAkUkVUUllfV0FJVF9NUw0KICAgICAgICBpZiAoLW5vdCAoVGVzdC1HaXZlblByb2Nlc3MgLVByb2Nlc3NOYW1lICRQcm9jZXNzTmFtZSkpIHsgcmV0dXJuICR0cnVlIH0NCiAgICB9DQogICAgcmV0dXJuICRmYWxzZQ0KfQ0KDQpmdW5jdGlvbiBHZXQtQ2FtcGFpZ25SZXNwb25zZSAoW3N0cmluZ10kQ2FtcGFpZ25JZCkgew0KICAgIHJldHVybiBbbnh0LmNhbXBhaWduYWN0aW9uXTo6UnVuQ2FtcGFpZ24oJENhbXBhaWduSWQpDQp9DQoNCmZ1bmN0aW9uIEdldC1DYW1wYWlnblJlc3BvbnNlU3RhdHVzICgkUmVzcG9uc2UpIHsNCiAgICByZXR1cm4gW254dC5jYW1wYWlnbmFjdGlvbl06OkdldFJlc3BvbnNlU3RhdHVzKCRSZXNwb25zZSkNCn0NCg0KZnVuY3Rpb24gR2V0LUNhbXBhaWduUmVzcG9uc2VBbnN3ZXIgKCRSZXNwb25zZSwgW3N0cmluZ10kUXVlc3Rpb25OYW1lKSB7DQogICAgcmV0dXJuIFtueHQuY2FtcGFpZ25hY3Rpb25dOjpHZXRSZXNwb25zZUFuc3dlcigkUmVzcG9uc2UsICRRdWVzdGlvbk5hbWUpWzBdDQp9DQoNCmZ1bmN0aW9uIEludm9rZS1JbnN0YWxsYXRpb24gKFtoYXNodGFibGVdJEluc3RhbGxlckluZm8pIHsNCiAgICB0cnkgew0KICAgICAgICBXYWl0LVJhbmRvbVRpbWUgLU1heGltdW1EZWxheUluU2Vjb25kcyAkSW5zdGFsbGVySW5mby5JbnN0YWxsYXRpb25EZWxheQ0KICAgICAgICBJbnZva2UtSW5zdGFsbGVyRG93bmxvYWQgLUluc3RhbGxlckluZm8gJEluc3RhbGxlckluZm8NCiAgICAgICAgVGVzdC1GaWxlSW50ZWdyaXR5IC1GaWxlSW5mbyAkSW5zdGFsbGVySW5mbw0KICAgICAgICBVbmJsb2NrLUluc3RhbGxlciAtUGF0aCAkSW5zdGFsbGVySW5mby5QYXRoDQogICAgICAgIEluc3RhbGwtQXBwbGljYXRpb24gLVBhdGggJEluc3RhbGxlckluZm8uUGF0aCBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLUFyZ3VtZW50cyAkSW5zdGFsbGVySW5mby5JbnN0YWxsYXRpb25Bcmd1bWVudHMNCiAgICB9IGZpbmFsbHkgew0KICAgICAgICBSZW1vdmUtRmlsZSAtUGF0aCAkSW5zdGFsbGVySW5mby5Gb2xkZXINCiAgICB9DQp9DQoNCmZ1bmN0aW9uIFdhaXQtUmFuZG9tVGltZSAoW2ludF0kTWF4aW11bURlbGF5SW5TZWNvbmRzKSB7DQogICAgaWYgKCRNYXhpbXVtRGVsYXlJblNlY29uZHMgLWd0IDApIHsNCiAgICAgICAgJHNlY29uZHMgPSBHZXQtUmFuZG9tIC1NaW5pbXVtIDAgLU1heGltdW0gJE1heGltdW1EZWxheUluU2Vjb25kcw0KICAgICAgICBTdGFydC1TbGVlcCAtU2Vjb25kcyAkc2Vjb25kcw0KICAgIH0NCn0NCg0KZnVuY3Rpb24gSW52b2tlLUluc3RhbGxlckRvd25sb2FkIChbaGFzaHRhYmxlXSRJbnN0YWxsZXJJbmZvKSB7DQogICAgVGVzdC1JbnRlcm5ldENvbm5lY3Rpdml0eQ0KICAgIE5ldy1JbnN0YWxsZXJGb2xkZXIgLVBhdGggJEluc3RhbGxlckluZm8uRm9sZGVyDQogICAgU2V0LUluc3RhbGxlckZvbGRlckFjY2Vzc1J1bGVzIC1QYXRoICRJbnN0YWxsZXJJbmZvLkZvbGRlcg0KICAgIEdldC1JbnN0YWxsZXJGaWxlRnJvbUludGVybmV0IC1VcmwgJEluc3RhbGxlckluZm8uSW5zdGFsbGVyVXJsIGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtUGF0aCAkSW5zdGFsbGVySW5mby5QYXRoDQp9DQoNCmZ1bmN0aW9uIFRlc3QtSW50ZXJuZXRDb25uZWN0aXZpdHkgew0KICAgICR0eXBlID0gW3R5cGVdOjpHZXRUeXBlRnJvbUNMU0lEKCRORVRXT1JLX01BTkFHRVJfQ0xTSUQpDQogICAgJGluc3RhbmNlID0gW2FjdGl2YXRvcl06OkNyZWF0ZUluc3RhbmNlKCR0eXBlKQ0KDQogICAgaWYgKC1ub3QgJGluc3RhbmNlLklzQ29ubmVjdGVkVG9JbnRlcm5ldCkgew0KICAgICAgICB0aHJvdyAiJCgkRVJST1JfRVhDRVBUSU9OX1RZUEUuRW52aXJvbm1lbnQpIE5vIEludGVybmV0IGNvbm5lY3Rpb24gYXZhaWxhYmxlLiAiDQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBOZXctSW5zdGFsbGVyRm9sZGVyIChbc3RyaW5nXSRQYXRoKSB7DQogICAgUmVtb3ZlLUZpbGUgLVBhdGggJFBhdGgNCiAgICBbdm9pZF0oTmV3LUl0ZW0gLVBhdGggJFBhdGggLUl0ZW1UeXBlICdEaXJlY3RvcnknKQ0KfQ0KDQpmdW5jdGlvbiBSZW1vdmUtRmlsZSAoW3N0cmluZ10kUGF0aCkgew0KICAgIGlmIChbc3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkUGF0aCkgLW9yIGANCiAgICAgICAgKC1ub3QgKFRlc3QtUGF0aCAtUGF0aCAkUGF0aCkpKSB7IHJldHVybiB9DQoNCiAgICBSZW1vdmUtSXRlbSAtUGF0aCAkUGF0aCAtUmVjdXJzZSAtRm9yY2UgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUNCn0NCg0KZnVuY3Rpb24gU2V0LUluc3RhbGxlckZvbGRlckFjY2Vzc1J1bGVzIChbc3RyaW5nXSRQYXRoKSB7DQogICAgW3NlY3VyaXR5LmFjY2Vzc2NvbnRyb2wuZmlsZXN5c3RlbXNlY3VyaXR5XSRhY2wgPSBHZXQtQWNsIC1QYXRoICRQYXRoDQogICAgRGlzYWJsZS1Jbmhlcml0YW5jZSAtQWNsICRhY2wNCiAgICBSZW1vdmUtQWNjZXNzRm9yT3RoZXJVc2VycyAtQWNsICRhY2wNCiAgICBTZXQtRnVsbENvbnRyb2xGb3JVc2VyIC1BY2wgJGFjbCBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAtVXNlck5hbWUgKFtzZWN1cml0eS5wcmluY2lwYWwud2luZG93c0lkZW50aXR5XTo6R2V0Q3VycmVudCgpLk5hbWUpDQogICAgU2V0LUZ1bGxDb250cm9sRm9yVXNlciAtQWNsICRhY2wgLVVzZXJOYW1lICdTWVNURU0nDQogICAgU2V0LUZvbGRlckFjbCAtQWNsICRhY2wgLVBhdGggJFBhdGgNCn0NCg0KZnVuY3Rpb24gRGlzYWJsZS1Jbmhlcml0YW5jZSAoW3NlY3VyaXR5LmFjY2Vzc2NvbnRyb2wuZmlsZXN5c3RlbXNlY3VyaXR5XSRBY2wpIHsNCiAgICBbdm9pZF0oJEFjbC5TZXRBY2Nlc3NSdWxlUHJvdGVjdGlvbigkdHJ1ZSwgJGZhbHNlKSkNCn0NCg0KZnVuY3Rpb24gUmVtb3ZlLUFjY2Vzc0Zvck90aGVyVXNlcnMgKFtzZWN1cml0eS5hY2Nlc3Njb250cm9sLmZpbGVzeXN0ZW1zZWN1cml0eV0kQWNsKSB7DQogICAgZm9yZWFjaCgkYWNjZXNzIGluICRBY2wuQWNjZXNzKSB7DQogICAgICAgIFt2b2lkXSgkQWNsLlJlbW92ZUFjY2Vzc1J1bGUoJGFjY2VzcykpDQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBTZXQtRnVsbENvbnRyb2xGb3JVc2VyIChbc2VjdXJpdHkuYWNjZXNzY29udHJvbC5maWxlc3lzdGVtc2VjdXJpdHldJEFjbCwgW3N0cmluZ10kVXNlck5hbWUpIHsNCiAgICAkYXJndW1lbnRzID0gQCgkVXNlck5hbWUsICdGdWxsQ29udHJvbCcsICdDb250YWluZXJJbmhlcml0LCBPYmplY3RJbmhlcml0JywgJ05vbmUnLCAnQWxsb3cnKQ0KICAgICRhY2Nlc3NSdWxlID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgc2VjdXJpdHkuYWNjZXNzY29udHJvbC5maWxlc3lzdGVtYWNjZXNzcnVsZSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1Bcmd1bWVudExpc3QgJGFyZ3VtZW50cw0KICAgIFt2b2lkXSgkQWNsLlNldEFjY2Vzc1J1bGUoJGFjY2Vzc1J1bGUpKQ0KfQ0KDQpmdW5jdGlvbiBTZXQtRm9sZGVyQWNsIChbc3RyaW5nXSRQYXRoLCBbc2VjdXJpdHkuYWNjZXNzY29udHJvbC5maWxlc3lzdGVtc2VjdXJpdHldJEFjbCkgew0KICAgIFNldC1BY2wgLVBhdGggJFBhdGggLUFjbE9iamVjdCAkQWNsDQp9DQoNCmZ1bmN0aW9uIEdldC1JbnN0YWxsZXJGaWxlRnJvbUludGVybmV0IChbc3RyaW5nXSRVcmwsIFtzdHJpbmddJFBhdGgpIHsNCiAgICB0cnkgew0KICAgICAgICAkd2ViQ2xpZW50ID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgJ25ldC53ZWJjbGllbnQnDQogICAgICAgICR3ZWJDbGllbnQuRG93bmxvYWRGaWxlKCRVcmwsICRQYXRoKQ0KICAgIH0gY2F0Y2ggew0KICAgICAgICB0aHJvdyAiJCgkRVJST1JfRVhDRVBUSU9OX1RZUEUuSW50ZXJuYWwpIEltcG9zc2libGUgdG8gZG93bmxvYWQgaW5zdGFsbGVyIGZyb20gJyRVcmwnLiAiDQogICAgfSBmaW5hbGx5IHsNCiAgICAgICAgaWYgKCRudWxsIC1uZSAkd2ViQ2xpZW50KSB7ICR3ZWJDbGllbnQuRGlzcG9zZSgpIH0NCiAgICB9DQp9DQoNCmZ1bmN0aW9uIFRlc3QtRmlsZUludGVncml0eSAoW2hhc2h0YWJsZV0kRmlsZUluZm8pIHsNCiAgICBUZXN0LUZpbGVQYXRoIC1QYXRoICRGaWxlSW5mby5QYXRoDQoNCiAgICBpZiAoLW5vdCBbc3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkRmlsZUluZm8uSGFzaCkpIHsNCiAgICAgICAgVGVzdC1GaWxlSGFzaCAtUGF0aCAkRmlsZUluZm8uUGF0aCAtRXhwZWN0ZWRIYXNoICRGaWxlSW5mby5IYXNoDQogICAgfQ0KDQogICAgaWYgKC1ub3QgW3N0cmluZ106OklzTnVsbE9yRW1wdHkoJEZpbGVJbmZvLlRodW1icHJpbnQpKSB7DQogICAgICAgIFRlc3QtRmlsZVRodW1icHJpbnQgLVBhdGggJEZpbGVJbmZvLlBhdGggYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1FeHBlY3RlZFRodW1icHJpbnQgJEZpbGVJbmZvLlRodW1icHJpbnQNCiAgICB9DQoNCiAgICBUZXN0LUZpbGVTaWduYXR1cmVSb290Q0EgLVBhdGggJEZpbGVJbmZvLlBhdGgNCn0NCg0KZnVuY3Rpb24gVGVzdC1GaWxlUGF0aCAoW3N0cmluZ10kUGF0aCkgew0KICAgIGlmIChbc3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkUGF0aCkgLW9yIGANCiAgICAgICAgLW5vdCAoVGVzdC1QYXRoIC1QYXRoICRQYXRoIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlKSkgew0KICAgICAgICB0aHJvdyAiJCgkRVJST1JfRVhDRVBUSU9OX1RZUEUuRW52aXJvbm1lbnQpIEZpbGUgJyRQYXRoJyBpcyBub3QgZm91bmQgb3IgYWNjZXNzIGRlbmllZC4gIg0KICAgIH0NCn0NCg0KZnVuY3Rpb24gVGVzdC1GaWxlSGFzaCAoW3N0cmluZ10kUGF0aCwgW3N0cmluZ10kRXhwZWN0ZWRIYXNoKSB7DQogICAgJGZpbGVIYXNoID0gR2V0LUhhc2ggLVBhdGggJFBhdGgNCiAgICBpZiAoJGZpbGVIYXNoIC1uZSAkRXhwZWN0ZWRIYXNoKSB7DQogICAgICAgIHRocm93ICIkKCRFUlJPUl9FWENFUFRJT05fVFlQRS5JbnRlcm5hbCkgRmlsZSAnJFBhdGgnIFNIQS0yNTYgaGFzaCAnJGZpbGVIYXNoJyBkb2VzIG5vdCBtYXRjaCBleHBlY3RlZCBoYXNoICckRXhwZWN0ZWRIYXNoJy4gIg0KICAgIH0NCn0NCg0KZnVuY3Rpb24gR2V0LUhhc2ggKFtzdHJpbmddJFBhdGgpIHsNCiAgICB0cnkgew0KICAgICAgICAkaGFzaGVyID0gW3NlY3VyaXR5LmNyeXB0b2dyYXBoeS5oYXNoYWxnb3JpdGhtXTo6Q3JlYXRlKCdTSEEyNTYnKQ0KICAgICAgICAkZmlsZSA9IFtpby5maWxlXTo6T3BlblJlYWQoJFBhdGgpDQogICAgICAgICRjb21wdXRlZEhhc2ggPSAkaGFzaGVyLkNvbXB1dGVIYXNoKCRmaWxlKQ0KDQogICAgICAgIHJldHVybiBbYml0Y29udmVydGVyXTo6VG9TdHJpbmcoJGNvbXB1dGVkSGFzaCkgLXJlcGxhY2UgJy0nLCAnJw0KICAgIH0gY2F0Y2ggew0KICAgICAgICB0aHJvdyAiJCgkRVJST1JfRVhDRVBUSU9OX1RZUEUuSW50ZXJuYWwpIEVycm9yIGNhbGN1bGF0aW5nIGhhc2ggb2YgdGhlIGZpbGUgJyRQYXRoJy4gIg0KICAgIH0gZmluYWxseSB7DQogICAgICAgIGlmICgkbnVsbCAtbmUgJGZpbGUpIHsgJGZpbGUuRGlzcG9zZSgpIH0NCiAgICB9DQp9DQoNCmZ1bmN0aW9uIFRlc3QtRmlsZVRodW1icHJpbnQgKFtzdHJpbmddJFBhdGgsIFtzdHJpbmddJEV4cGVjdGVkVGh1bWJwcmludCkgew0KICAgICRmaWxlU2lnbmF0dXJlID0gR2V0LUZpbGVTaWduYXR1cmUgLVBhdGggJFBhdGgNCiAgICBUZXN0LVNpZ25hdHVyZVN0YXR1cyAtU3RhdHVzICRmaWxlU2lnbmF0dXJlLlN0YXR1cw0KICAgIFRlc3QtRmlsZVNpZ25hdHVyZVRodW1icHJpbnQgLVRodW1icHJpbnQgJGZpbGVTaWduYXR1cmUuU2lnbmVyQ2VydGlmaWNhdGUuVGh1bWJwcmludCBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtRXhwZWN0ZWRUaHVtYnByaW50ICRFeHBlY3RlZFRodW1icHJpbnQNCn0NCg0KZnVuY3Rpb24gR2V0LUZpbGVTaWduYXR1cmUgKFtzdHJpbmddJFBhdGgpIHsNCiAgICB0cnkgew0KICAgICAgICByZXR1cm4gR2V0LUF1dGhlbnRpY29kZVNpZ25hdHVyZSAtRmlsZVBhdGggJFBhdGggLUVycm9yQWN0aW9uIFN0b3ANCiAgICB9IGNhdGNoIHsNCiAgICAgICAgdGhyb3cgIiQoJEVSUk9SX0VYQ0VQVElPTl9UWVBFLkludGVybmFsKSBVbmFibGUgdG8gcmV0cmlldmUgZmlsZSAnJFBhdGgnIHNpZ25hdHVyZS4gIg0KICAgIH0NCn0NCg0KZnVuY3Rpb24gVGVzdC1TaWduYXR1cmVTdGF0dXMgKFttYW5hZ2VtZW50LmF1dG9tYXRpb24uc2lnbmF0dXJlc3RhdHVzXSRTdGF0dXMpIHsNCiAgICBpZiAoJFN0YXR1cyAtZXEgW21hbmFnZW1lbnQuYXV0b21hdGlvbi5zaWduYXR1cmVzdGF0dXNdOjpWYWxpZCkgeyByZXR1cm4gfQ0KDQogICAgc3dpdGNoICgkU3RhdHVzKSB7DQogICAgICAgIChbbWFuYWdlbWVudC5hdXRvbWF0aW9uLnNpZ25hdHVyZXN0YXR1c106OlVua25vd25FcnJvcikgeyAkbWVzc2FnZSA9ICdGaWxlIGhhcyBhbiBpbnZhbGlkIHNpZ25hdHVyZS4gJyB9DQogICAgICAgIChbbWFuYWdlbWVudC5hdXRvbWF0aW9uLnNpZ25hdHVyZXN0YXR1c106Ok5vdFNpZ25lZCkgeyAkbWVzc2FnZSA9ICdGaWxlIGlzIG5vdCBzaWduZWQuICcgfQ0KICAgICAgICAoW21hbmFnZW1lbnQuYXV0b21hdGlvbi5zaWduYXR1cmVzdGF0dXNdOjpIYXNoTWlzbWF0Y2gpIHsgJG1lc3NhZ2UgPSAnRmlsZSBoYXNoIGRvZXMgbm90IG1hdGNoIHdpdGggdGhlIG9uZSBzdG9yZWQgaW4gdGhlIHNpZ25hdHVyZS4gJyB9DQogICAgICAgIChbbWFuYWdlbWVudC5hdXRvbWF0aW9uLnNpZ25hdHVyZXN0YXR1c106Ok5vdFRydXN0ZWQpIHsgJG1lc3NhZ2UgPSAnRmlsZSBzaWduYXR1cmUgaXMgbm90IHRydXN0ZWQuICcgfQ0KICAgICAgICAoW21hbmFnZW1lbnQuYXV0b21hdGlvbi5zaWduYXR1cmVzdGF0dXNdOjpOb3RTdXBwb3J0ZWRGaWxlRm9ybWF0KSB7ICRtZXNzYWdlID0gJ0ZpbGUgZG9lcyBub3QgaGF2ZSBzdXBwb3J0ZWQgZm9ybWF0IGZvciBzaWduaW5nIG9wZXJhdGlvbnMuICcgfQ0KICAgICAgICAoW21hbmFnZW1lbnQuYXV0b21hdGlvbi5zaWduYXR1cmVzdGF0dXNdOjpJbmNvbXBhdGlibGUpIHsgJG1lc3NhZ2UgPSAnRmlsZSBzaWduYXR1cmUgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIGN1cnJlbnQgc3lzdGVtLiAnIH0NCiAgICAgICAgZGVmYXVsdCB7ICRtZXNzYWdlID0gIkZpbGUgc2lnbmF0dXJlIGhhcyB1bmtub3duIHN0YXR1cyAnJFN0YXR1cycuICIgfQ0KICAgIH0NCiAgICBpZiAoLW5vdCBbc3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkbWVzc2FnZSkpIHsgdGhyb3cgJG1lc3NhZ2UgfQ0KfQ0KDQpmdW5jdGlvbiBUZXN0LUZpbGVTaWduYXR1cmVUaHVtYnByaW50IChbc3RyaW5nXSRUaHVtYnByaW50LCBbc3RyaW5nXSRFeHBlY3RlZFRodW1icHJpbnQpIHsNCiAgICBpZiAoJFRodW1icHJpbnQgLW5lICRFeHBlY3RlZFRodW1icHJpbnQpIHsNCiAgICAgICAgdGhyb3cgIiQoJEVSUk9SX0VYQ0VQVElPTl9UWVBFLkludGVybmFsKSBSZWNlaXZlZCB0aHVtYnByaW50ICckVGh1bWJwcmludCcgZG9lcyBub3QgbWF0Y2ggZXhwZWN0ZWQgdGh1bWJwcmludCAnJEV4cGVjdGVkVGh1bWJwcmludCcuICINCiAgICB9DQp9DQoNCmZ1bmN0aW9uIFRlc3QtRmlsZVNpZ25hdHVyZVJvb3RDQSAoW3N0cmluZ10kUGF0aCkgew0KICAgICRmaWxlU2lnbmF0dXJlID0gR2V0LUZpbGVTaWduYXR1cmUgLVBhdGggJFBhdGgNCiAgICBUZXN0LVNpZ25hdHVyZVN0YXR1cyAtU3RhdHVzICRmaWxlU2lnbmF0dXJlLlN0YXR1cw0KDQogICAgW3N0cmluZ10kZmlsZVB1YmxpY0tleSA9IEdldC1GaWxlUm9vdENhUHVibGljS2V5IC1TaWduYXR1cmUgJGZpbGVTaWduYXR1cmUNCiAgICBbc3RyaW5nXSRmaWxlUHVibGljS2V5SGFzaCA9IEdldC1TdHJpbmdIYXNoIC1TdHJpbmcgJGZpbGVQdWJsaWNLZXkgLUhhc2hOYW1lICdTSEEyNTYnDQoNCiAgICBpZiAoLW5vdCAkVFJVU1RFRF9QVUJMSUNfQ0FTLkNvbnRhaW5zS2V5KCRmaWxlUHVibGljS2V5SGFzaCkpIHsNCiAgICAgICAgdGhyb3cgIiQoJEVSUk9SX0VYQ0VQVElPTl9UWVBFLkludGVybmFsKSBUaGUgaGFzaCBvYnRhaW5lZCAnJGZpbGVQdWJsaWNLZXlIYXNoJyBmcm9tIHRoZSByb290IENBIG9mIHRoZSBmaWxlICckUGF0aCcgaXMgbm90IGNvbnNpZGVyZWQgYXMgdHJ1c3RlZC4gIg0KICAgIH0NCn0NCg0KZnVuY3Rpb24gR2V0LUZpbGVSb290Q2FQdWJsaWNLZXkgKFtvYmplY3RdJFNpZ25hdHVyZSkgew0KICAgICRyb290Q2EgPSBHZXQtRmlsZVJvb3RDYSAtU2lnbmF0dXJlICRTaWduYXR1cmUNCiAgICByZXR1cm4gJHJvb3RDYS5HZXRQdWJsaWNLZXlTdHJpbmcoKQ0KfQ0KDQpmdW5jdGlvbiBHZXQtRmlsZVJvb3RDYSAoW29iamVjdF0kU2lnbmF0dXJlKSB7DQogICAgJGNoYWluID0gR2V0LUNlcnRpZmljYXRlQ2hhaW4gLVNpZ25lckNlcnRpZmljYXRlICRTaWduYXR1cmUuU2lnbmVyQ2VydGlmaWNhdGUNCiAgICByZXR1cm4gR2V0LVJvb3RDYUZyb21DZXJ0Q2hhaW4gLUNlcnRDaGFpbiAkY2hhaW4NCn0NCg0KZnVuY3Rpb24gR2V0LUNlcnRpZmljYXRlQ2hhaW4gKFtvYmplY3RdJFNpZ25lckNlcnRpZmljYXRlKSB7DQogICAgJGNoYWluID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgJ3NlY3VyaXR5LmNyeXB0b2dyYXBoeS54NTA5Y2VydGlmaWNhdGVzLng1MDljaGFpbicNCiAgICBbdm9pZF0oJGNoYWluLkJ1aWxkKCRTaWduZXJDZXJ0aWZpY2F0ZSkpDQogICAgcmV0dXJuICRjaGFpbg0KfQ0KDQpmdW5jdGlvbiBHZXQtUm9vdENhRnJvbUNlcnRDaGFpbiAoW29iamVjdF0kQ2VydENoYWluKSB7DQogICAgcmV0dXJuICRDZXJ0Q2hhaW4uQ2hhaW5FbGVtZW50cyB8IFNlbGVjdC1PYmplY3QgLUV4cGFuZFByb3BlcnR5IENlcnRpZmljYXRlIC1MYXN0IDENCn0NCg0KZnVuY3Rpb24gR2V0LVN0cmluZ0hhc2ggKFtzdHJpbmddJFN0cmluZywgW3N0cmluZ10kSGFzaE5hbWUpIHsNCiAgICAkaGFzaEJ5dGVzID0gW3NlY3VyaXR5LmNyeXB0b2dyYXBoeS5oYXNoYWxnb3JpdGhtXTo6Q3JlYXRlKCRIYXNoTmFtZSkuQ29tcHV0ZUhhc2goW3N5c3RlbS50ZXh0LmVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygkU3RyaW5nKSkNCiAgICByZXR1cm4gW2JpdGNvbnZlcnRlcl06OlRvU3RyaW5nKCRoYXNoQnl0ZXMpIC1yZXBsYWNlICctJywgJycNCn0NCg0KZnVuY3Rpb24gVW5ibG9jay1JbnN0YWxsZXIgKFtzdHJpbmddJFBhdGgpIHsNCiAgICBbdm9pZF0oSW52b2tlLVByb2Nlc3MgLUZpbGVQYXRoICRDTURfRVhFIGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgLUFyZ3VtZW50cyAoJFVOQkxPQ0tfQ09NTUFORCAtZiAkUGF0aCkpDQp9DQoNCmZ1bmN0aW9uIEludm9rZS1Qcm9jZXNzIChbc3RyaW5nXSRGaWxlUGF0aCwgW3N0cmluZ10kQXJndW1lbnRzKSB7DQogICAgJG91dHB1dCA9IEB7RXhpdENvZGUgPSAtMQ0KICAgICAgICAgICAgICAgIFN0ZE91dCA9ICRudWxsDQogICAgICAgICAgICAgICAgU3RkRXJyID0gJG51bGx9DQogICAgJHByb2Nlc3NJbmZvID0gTmV3LW9iamVjdCAtVHlwZU5hbWUgZGlhZ25vc3RpY3MucHJvY2Vzc3N0YXJ0aW5mbw0KICAgICRwcm9jZXNzSW5mby5DcmVhdGVOb1dpbmRvdyA9ICR0cnVlDQogICAgJHByb2Nlc3NJbmZvLlVzZVNoZWxsRXhlY3V0ZSA9ICRmYWxzZQ0KICAgICRwcm9jZXNzSW5mby5SZWRpcmVjdFN0YW5kYXJkT3V0cHV0ID0gJHRydWUNCiAgICAkcHJvY2Vzc0luZm8uUmVkaXJlY3RTdGFuZGFyZEVycm9yID0gJHRydWUNCiAgICAkcHJvY2Vzc0luZm8uRmlsZU5hbWUgPSAkRmlsZVBhdGgNCiAgICAkcHJvY2Vzc0luZm8uQXJndW1lbnRzID0gJEFyZ3VtZW50cw0KICAgICRwcm9jZXNzSW5mby5Xb3JraW5nRGlyZWN0b3J5ID0gU3BsaXQtUGF0aCAkRmlsZVBhdGggLVBhcmVudA0KICAgICRwcm9jZXNzID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgZGlhZ25vc3RpY3MucHJvY2Vzcw0KICAgICRwcm9jZXNzLlN0YXJ0SW5mbyA9ICRwcm9jZXNzSW5mbw0KDQogICAgdHJ5IHsNCiAgICAgICAgW3ZvaWRdJHByb2Nlc3MuU3RhcnQoKQ0KICAgICAgICAkb3V0cHV0LlN0ZE91dCA9ICRwcm9jZXNzLlN0YW5kYXJkT3V0cHV0LlJlYWRUb0VuZCgpDQogICAgICAgICRvdXRwdXQuU3RkRXJyID0gJHByb2Nlc3MuU3RhbmRhcmRFcnJvci5SZWFkVG9FbmQoKQ0KICAgICAgICAkcHJvY2Vzcy5XYWl0Rm9yRXhpdCgpDQogICAgfSBjYXRjaCB7DQogICAgICAgIHRocm93ICIkKCRFUlJPUl9FWENFUFRJT05fVFlQRS5JbnRlcm5hbCkgJyRGaWxlUGF0aCcgZXhlY3V0aW9uIGZhaWxlZC4gIg0KICAgIH0gZmluYWxseSB7DQogICAgICAgICRvdXRwdXQuRXhpdENvZGUgPSAkcHJvY2Vzcy5FeGl0Q29kZQ0KICAgICAgICAkcHJvY2Vzcy5EaXNwb3NlKCkNCiAgICB9DQoNCiAgICByZXR1cm4gJG91dHB1dA0KfQ0KDQpmdW5jdGlvbiBJbnN0YWxsLUFwcGxpY2F0aW9uIChbc3RyaW5nXSRQYXRoLCBbc3RyaW5nXSRBcmd1bWVudHMpIHsNCiAgICBbdm9pZF0oSW52b2tlLVByb2Nlc3MgLUZpbGVQYXRoICRQYXRoIGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgLUFyZ3VtZW50cyAkQXJndW1lbnRzKQ0KfQ0KDQpmdW5jdGlvbiBJbnZva2UtT3BlcmF0aW9uQ29tcGxldGVkQ2FtcGFpZ24gKFtzdHJpbmddJENhbXBhaWduSWQpIHsNCiAgICBbbnh0LmNhbXBhaWduYWN0aW9uXTo6UnVuU3RhbmRBbG9uZUNhbXBhaWduKCRDYW1wYWlnbklkKQ0KfQ0KDQojDQojIElucHV0IHBhcmFtZXRlciB2YWxpZGF0aW9uDQojDQpmdW5jdGlvbiBUZXN0LUlucHV0UGFyYW1ldGVycyAoW2hhc2h0YWJsZV0kSW5wdXRQYXJhbWV0ZXJzKSB7DQogICAgVGVzdC1HVUlEUGFyYW1ldGVyIGANCiAgICAgICAgLVBhcmFtTmFtZSAnQ2FtcGFpZ25JZCcgYA0KICAgICAgICAtUGFyYW1WYWx1ZSAkSW5wdXRQYXJhbWV0ZXJzLkNhbXBhaWduSWQNCiAgICBUZXN0LUdVSURQYXJhbWV0ZXIgYA0KICAgICAgICAtUGFyYW1OYW1lICdPcGVyYXRpb25Db21wbGV0ZWRDYW1wYWlnbklkJyBgDQogICAgICAgIC1QYXJhbVZhbHVlICRJbnB1dFBhcmFtZXRlcnMuT3BlcmF0aW9uQ29tcGxldGVkQ2FtcGFpZ25JZA0KICAgIFRlc3QtUGFyYW1JbkFsbG93ZWRSYW5nZSBgDQogICAgICAgIC1QYXJhbU5hbWUgJ01heGltdW1EZWxheUluU2Vjb25kcycgYA0KICAgICAgICAtUGFyYW1WYWx1ZSAkSW5wdXRQYXJhbWV0ZXJzLk1heGltdW1EZWxheUluU2Vjb25kcyBgDQogICAgICAgIC1Mb3dlckxpbWl0IDAgYA0KICAgICAgICAtVXBwZXJMaW1pdCAkTUFYX1NDUklQVF9ERUxBWV9TRUMNCn0NCg0KIw0KIyBJbnN0YWxsYXRpb24gbWFuYWdlbWVudA0KIw0KZnVuY3Rpb24gSW52b2tlLVRlYW1zUmVJbnN0YWxsIChbaGFzaHRhYmxlXSRJbnB1dFBhcmFtZXRlcnMpIHsNCiAgICAkaW50YWxsZXJTcGVjcyA9IEluaXRpYWxpemUtSW5zdGFsbGVyU3BlY3MgLUNlcnRpZmljYXRlVGh1bWJwcmludCAnJyBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1JbnN0YWxsZXJBcmdzICRJTlNUQUxMRVJfQVJHUyBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1Eb3dubG9hZFVSTHg4NiAkSU5TVEFMTEVSX0RPV05MT0FEX1VSTF9YODYgYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtRG93bmxvYWRVUkx4NjQgJElOU1RBTExFUl9ET1dOTE9BRF9VUkxfWDY0IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLUZpbGVIYXNoeDg2ICcnIGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLUZpbGVIYXNoeDY0ICcnDQogICAgJGluc3RhbGxlckluZm8gPSBJbml0aWFsaXplLUluc3RhbGxlckluZm9ybWF0aW9uIC1JbnB1dFBhcmFtZXRlcnMgJElucHV0UGFyYW1ldGVycyBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1JbnN0YWxsZXJTcGVjcyAkaW50YWxsZXJTcGVjcw0KICAgICR0ZWFtc0lzQ2xvc2VkID0gSW52b2tlLVRlYW1zQ2xvc3VyZSAtQ2FtcGFpZ25JZCAkSW5zdGFsbGVySW5mby5DYW1wYWlnbklkDQogICAgaWYgKC1ub3QgJHRlYW1zSXNDbG9zZWQpIHsNCiAgICAgICAgdGhyb3cgJ0ltcG9zc2libGUgdG8gY2xvc2UgTWljcm9zb2Z0IFRlYW1zLiBSZWluc3RhbGxhdGlvbiBjb3VsZCBub3QgYmUgcGVyZm9ybWVkLiAnDQogICAgfQ0KDQogICAgSW52b2tlLVRlYW1zQXBwIC1JbnN0YWxsZXJJbmZvICRpbnN0YWxsZXJJbmZvDQp9DQoNCmZ1bmN0aW9uIEludm9rZS1UZWFtc0Nsb3N1cmUgKFtzdHJpbmddJENhbXBhaWduSWQpIHsNCiAgICBpZiAoLW5vdCAoVGVzdC1HaXZlblByb2Nlc3MgLVByb2Nlc3NOYW1lICRURUFNU19QUk9DRVNTX05BTUUpKSB7IHJldHVybiAkdHJ1ZSB9DQoNCiAgICBpZiAoVGVzdC1FbXB0eUdVSUQgLUd1aWQgJENhbXBhaWduSWQpIHsNCiAgICAgICAgcmV0dXJuIFN0b3AtR2l2ZW5Qcm9jZXNzIC1Qcm9jZXNzTmFtZSAkVEVBTVNfUFJPQ0VTU19OQU1FDQogICAgfQ0KDQogICAgcmV0dXJuIEludm9rZS1DYW1wYWlnbiAtQ2FtcGFpZ25JZCAkQ2FtcGFpZ25JZA0KfQ0KDQpmdW5jdGlvbiBJbnZva2UtQ2FtcGFpZ24gKFtzdHJpbmddJENhbXBhaWduSWQpIHsNCiAgICAkcmVzcG9uc2UgPSBHZXQtQ2FtcGFpZ25SZXNwb25zZSAtQ2FtcGFpZ25JZCAkQ2FtcGFpZ25JZA0KICAgICRzdGF0dXMgPSBHZXQtQ2FtcGFpZ25SZXNwb25zZVN0YXR1cyAtUmVzcG9uc2UgJHJlc3BvbnNlDQoNCiAgICBzd2l0Y2ggKCRzdGF0dXMpIHsNCiAgICAgICAgJ2Z1bGx5JyB7DQogICAgICAgICAgICBpZiAoKEdldC1DYW1wYWlnblJlc3BvbnNlQW5zd2VyIC1SZXNwb25zZSAkcmVzcG9uc2UgLVF1ZXN0aW9uTmFtZSAnQ2xvc2VUZWFtcycpIC1lcSAnQ2xvc2VOb3cnKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIFN0b3AtR2l2ZW5Qcm9jZXNzIC1Qcm9jZXNzTmFtZSAkVEVBTVNfUFJPQ0VTU19OQU1FDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aHJvdyAnVGhlIHVzZXIgZGVjbGluZWQgdG8gY2xvc2UgTWljcm9zb2Z0IFRlYW1zIG5vdyB0byBwZXJmb3JtIHRoZSByZWluc3RhbGxhdGlvbi4gJw0KICAgICAgICB9DQogICAgICAgICd0aW1lb3V0JyB7IHRocm93ICdUaW1lb3V0IG9uIGdldHRpbmcgYW4gYW5zd2VyIGZyb20gdGhlIHVzZXIuIE1pY3Jvc29mdCBUZWFtcyByZWluc3RhbGxhdGlvbiBjb3VsZCBub3QgYmUgcGVyZm9ybWVkLiAnIH0NCiAgICAgICAgJ3Bvc3Rwb25lZCcgeyB0aHJvdyAnVGhlIHVzZXIgcG9zdHBvbmVkIHRoZSBjYW1wYWlnbi4gTWljcm9zb2Z0IFRlYW1zIHJlaW5zdGFsbGF0aW9uIGNvdWxkIG5vdCBiZSBwZXJmb3JtZWQuICcgfQ0KICAgICAgICAnZGVjbGluZWQnIHsgdGhyb3cgJ1RoZSB1c2VyIGRlY2xpbmVkIHRoZSBjYW1wYWlnbi4gTWljcm9zb2Z0IFRlYW1zIHJlaW5zdGFsbGF0aW9uIGNvdWxkIG5vdCBiZSBwZXJmb3JtZWQuICcgfQ0KICAgICAgICAnY29ubmVjdGlvbmZhaWxlZCcgeyB0aHJvdyAnVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIENvbGxlY3RvciBjb21wb25lbnQgdGhhdCBjb250cm9scyBjYW1wYWlnbiBub3RpZmljYXRpb25zLiAnIH0NCiAgICAgICAgJ25vdGlmaWNhdGlvbmZhaWxlZCcgeyB0aHJvdyAnVW5hYmxlIHRvIG5vdGlmeSB0aGUgQ29sbGVjdG9yIGNvbXBvbmVudCB0aGF0IGNvbnRyb2xzIGNhbXBhaWduIG5vdGlmaWNhdGlvbnMuICcgfQ0KICAgICAgICBkZWZhdWx0IHsgdGhyb3cgIkZhaWxlZCB0byBoYW5kbGUgY2FtcGFpZ24gcmVzcG9uc2U6ICRyZXNwb25zZS4gIiB9DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBJbnZva2UtVGVhbXNBcHAgKFtoYXNodGFibGVdJEluc3RhbGxlckluZm8pIHsNCiAgICBTZXQtVGxzMTJTZWN1cml0eVByb3RvY29sDQogICAgSW52b2tlLUluc3RhbGxhdGlvbiAtSW5zdGFsbGVySW5mbyAkSW5zdGFsbGVySW5mbw0KDQogICAgaWYgKC1ub3QgKFRlc3QtRW1wdHlHVUlEIC1HdWlkICRJbnN0YWxsZXJJbmZvLk9wZXJhdGlvbkNvbXBsZXRlZENhbXBhaWduSWQpKSB7DQogICAgICAgIEludm9rZS1PcGVyYXRpb25Db21wbGV0ZWRDYW1wYWlnbiAtQ2FtcGFpZ25JZCAkSW5zdGFsbGVySW5mby5PcGVyYXRpb25Db21wbGV0ZWRDYW1wYWlnbklkDQogICAgfQ0KDQogICAgV3JpdGUtU3RhdHVzTWVzc2FnZSAtTWVzc2FnZSAnTWljcm9zb2Z0IFRlYW1zIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSByZWluc3RhbGxlZC4gJw0KfQ0KDQpmdW5jdGlvbiBTZXQtVGxzMTJTZWN1cml0eVByb3RvY29sIHsNCiAgICBbbmV0LnNlcnZpY2Vwb2ludG1hbmFnZXJdOjpTZWN1cml0eVByb3RvY29sID0gW2VudW1dOjpUb09iamVjdChbbmV0LnNlY3VyaXR5cHJvdG9jb2x0eXBlXSwgJFRMU18xMikNCn0NCg0KIw0KIyBNYWluIHNjcmlwdCBmbG93DQojDQpbZW52aXJvbm1lbnRdOjpFeGl0KChJbnZva2UtTWFpbiAtSW5wdXRQYXJhbWV0ZXJzICRNeUludm9jYXRpb24uQm91bmRQYXJhbWV0ZXJzKSkNCg=="}}}